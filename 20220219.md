## 重构的第一步
重构前，先检查自己是否有一套可靠的测试集。这些测试必须有自我检验能力。

## 每次修改
编译、测试、提交

## 做了什么
为原函数添加足够的结构，以便我能更好地理解它，看清它的逻辑结构。

将逻辑分成两部分：一部分计算详单所需的数据，另一部分将数据渲染成文本或 HTML。第一阶段会创建一个中转数据结构，再把它传递给第二阶段。

编程时，需要遵循营地法则：保证你离开时的代码库一定比来时更健康。

两顶帽子: 添加新功能和重构。
添加新功能时，我不应该修改既有代码，只管添加新功能。通过添加测试并让测试正常运行，我可以衡量自己的工作进度。
重构时，我就不能再添加功能，只管调整代码的结构。

重构的唯一目的就是让我们开发更快，用更少的工作量创造更大的价值。


我们之所以重构，因为它能让我们更快——添加功能更快，修复 bug 更快。一定要随时记住这一点，与别人交流时也要不断强调这一点。重构应该总是由经济利益驱动。程序员、经理和客户越理解这一点，“好的设计”那条曲线就会越经常出现。

## 代码所有权
程序员可能各自分工负责系统的不同区域，但这种责任应该体现为监控自己责任区内发生的修改，而不是简单粗暴地禁止别人修改。

开源模型
B 团队的成员也可以在一个分支上修改 A 团队的代码，然后把提交发送给 A 团队去审核。

## 分支管理
基于主干开发

## 自测试的代码 （重构的第一块基石）
自测试代码、持续集成、重构
## 渐进式数据库设计